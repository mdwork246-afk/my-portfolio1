<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
        input, textarea { width: 100%; margin-bottom: 10px; padding: 8px; }
        button { background: #007bff; color: white; border: none; padding: 10px; cursor: pointer; }
        .project-item { border-bottom: 1px solid #ccc; padding: 10px 0; display: flex; justify-content: space-between; }
        .delete-btn { background: red; }
    </style>
</head>
<body>
    <h1>Manage Projects</h1>
    
    <h3>Add New Project</h3>
    <input type="text" id="title" placeholder="Project Title">
    <textarea id="desc" placeholder="Description"></textarea>
    <input type="text" id="img" placeholder="Image URL (or placeholder link)">
    <input type="text" id="link" placeholder="Project Link">
    <button onclick="addProject()">Save Project</button>

    <hr>
    <h3>Current Projects</h3>
    <div id="admin-list">Loading...</div>

    <script>
        async function fetchProjects() {
            const res = await fetch('/projects');
            const data = await res.json();
            const list = document.getElementById('admin-list');
            list.innerHTML = data.map(p => `
                <div class="project-item">
                    <span>${p.title}</span>
                    <button class="delete-btn" onclick="deleteProject(${p.id})">Delete</button>
                </div>
            `).join('');
        }

        async function addProject() {
            const project = {
                title: document.getElementById('title').value,
                description: document.getElementById('desc').value,
                image_url: document.getElementById('img').value,
                link: document.getElementById('link').value
            };
            await fetch('/projects', {
                method: 'POST',
                body: JSON.stringify(project)
            });
            location.reload();
        }

        async function deleteProject(id) {
            if(confirm('Delete this project?')) {
                await fetch('/projects', {
                    method: 'DELETE',
                    body: JSON.stringify({ id })
                });
                location.reload();
            }
        }

        fetchProjects();
    </script>
</body>
</html>

